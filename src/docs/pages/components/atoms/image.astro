---
import DocLayout from "../../../layouts/DocLayout.astro";
import Preview from "../../../components/Preview.astro";
import PropsTable from "../../../components/PropsTable.astro";
import { components } from "../../../data/components.js";
import Image from "@lib/components/Image/Image.astro";

const code = `
  <Image 
     quality={90}
     src="https://picsum.photos/1600/900"
     style="--image-aspect-ratio: 30 / 5"
   />`;
const cssVarCode = `<Image src="https://picsum.photos/800/800" alt="Square contain" style="--image-aspect-ratio: 1 / 1; --image-object-fit: contain; --image-object-position: top;" />`;

const props = [
  { name: "id", type: "string", description: "Optional id for the image element." },
  { name: "class", type: "string", description: "Additional class names." },
  { name: "style", type: "string", description: "Inline styles or CSS var overrides." },
  {
    name: "src",
    type: "string | ImageMetadata",
    default: '"https://picsum.photos/320/180"',
    description: "Source image or URL."
  },
  { name: "alt", type: "string", default: '""', description: "Alt text (required for a11y)." },
  { name: "format", type: "string", default: '"webp"', description: "Output format." },
  { name: "quality", type: "number", default: "60", description: "Compression quality." },
  {
    name: "widths",
    type: "number[]",
    default: "[640,960,1280,1600,1920]",
    description: "Responsive widths."
  },
  { name: "sizes", type: "string", default: '"100vw"', description: "Sizes attribute." },
  {
    name: "fetchpriority",
    type: `"high" | "low" | "auto"`,
    default: '"high"',
    description: "Fetch priority."
  },
  {
    name: "loading",
    type: `"lazy" | "eager"`,
    default: '"lazy"',
    description: "Loading strategy."
  },
  {
    name: "~~backgroundPosition~~",
    type: "string",
    default: '"center"',
    description: "Deprecated — use style vars (see below)."
  },
  {
    name: "~~aspectRatio~~",
    type: "string",
    default: '"16/9"',
    description: "Deprecated — use style vars (see below)."
  }
];

const styleVars = [
  { name: "--image-object-fit", description: "Object-fit mode.", default: "cover" },
  { name: "--image-object-position", description: "Object position.", default: "center" },
  {
    name: "--image-aspect-ratio",
    description: "Aspect ratio for the wrapper.",
    default: "16 / 9"
  }
];
---

<DocLayout
  title="Image"
  description={"Image wrapper using Astro:asset with defaults"}
  items={components}
>
  <PropsTable title="Props" props={props} />

  <PropsTable title="Style variables" props={styleVars} />

  <Preview title="Preview" code={code}>
    <Image quality={90} src="https://picsum.photos/1600/900" style="--image-aspect-ratio: 30 / 5" />
  </Preview>

  <Preview title="CSS variables" code={cssVarCode}>
    <Image
      src="https://picsum.photos/800/800"
      alt="Square contain"
      style="--image-aspect-ratio: 1 / 1; --image-object-fit: contain; --image-object-position: top;"
    />
  </Preview>
</DocLayout>
