---
import DocLayout from "../../../layouts/DocLayout.astro";
import Preview from "../../../components/Preview.astro";
import PropsTable from "../../../components/PropsTable.astro";
import { components } from "../../../data/components.js";
import GoogleReviews from "@lib/components/GoogleReviews/GoogleReviews.astro";

const props = [
  { name: "id", type: "string", description: "Optional id for the root element." },
  { name: "class", type: "string", description: "Additional class names." },
  { name: "style", type: "string", description: "Inline styles or CSS var overrides." },
  { name: "placeId", type: "string", required: true, description: "Google Place ID (required)." },
  { name: "apiKey", type: "string", required: true, description: "Google Places API key (required)." },
  { name: "locale", type: "string", default: '"en"', description: "Locale for API results." },
  {
    name: "sort",
    type: `"newest" | "most_relevant" | "both"`,
    default: '"newest"',
    description: "Review sort order; 'both' merges and dedupes."
  },
  {
    name: "maxReviews",
    type: "number",
    default: "10",
    description: "How many reviews to show (1–20)."
  },
  { name: "title", type: "string", default: '"Google Reviews"', description: "Header title." },
  {
    name: "writeReviewLabel",
    type: "string",
    default: '"Review us on Google"',
    description: "Label for the write-review button."
  },
  {
    name: "moreReviewsLabel",
    type: "string",
    default: '"See all reviews"',
    description: "Label for the 'See all reviews' link."
  },
  {
    name: "readMoreLabel",
    type: "string",
    default: '"Read more"',
    description: "Label for the per-review link (localized by default for en/fr)."
  },
  {
    name: "truncateLines",
    type: "number",
    default: "4",
    description: "Line clamp for review text (1–12)."
  },
  {
    name: "showSchema",
    type: "boolean",
    default: "true",
    description: "Inject JSON-LD AggregateRating + reviews."
  },
  {
    name: "strict",
    type: "boolean",
    default: "true",
    description: "If true, throw on fetch failure or empty data at build time."
  },
  {
    name: "translate",
    type: "boolean",
    default: "true",
    description: "Request translated reviews in the specified locale (set false to keep originals)."
  }
];

const styleVars = [
  { name: "--googlereviews-max-width", default: "100%", description: "Max width of the widget." },
  { name: "--googlereviews-bg", default: "#f6f7fb", description: "Container background." },
  { name: "--googlereviews-radius", default: "16px", description: "Container corner radius." },
  { name: "--googlereviews-padding", default: "1.5rem", description: "Container padding." },
  { name: "--googlereviews-shadow", default: "0 8px 20px rgba(0,0,0,0.05)", description: "Container shadow." },
  { name: "--googlereviews-title-color", default: "#3e3e3e", description: "Header text color." },
  { name: "--googlereviews-score-color", default: "#111", description: "Score number color." },
  { name: "--googlereviews-count-color", default: "#5f6368", description: "Review count color." },
  { name: "--googlereviews-star-color", default: "#f4b400", description: "Filled star color." },
  { name: "--googlereviews-star-muted", default: "#d9d9d9", description: "Empty star color." },
  { name: "--googlereviews-button-bg", default: "#4285f4", description: "Primary button background." },
  { name: "--googlereviews-button-color", default: "#fff", description: "Primary button text color." },
  { name: "--googlereviews-button-radius", default: "999px", description: "Primary button radius." },
  { name: "--googlereviews-button-shadow", default: "0 8px 16px rgba(66,133,244,0.35)", description: "Primary button shadow." },
  { name: "--googlereviews-card-bg", default: "#fff", description: "Review card background." },
  { name: "--googlereviews-card-radius", default: "12px", description: "Review card radius." },
  { name: "--googlereviews-card-shadow", default: "0 10px 20px rgba(0,0,0,0.08)", description: "Review card shadow." },
  { name: "--googlereviews-card-width", default: "clamp(240px, 28vw, 320px)", description: "Card width in carousel." },
  { name: "--googlereviews-card-gap", default: "1rem", description: "Gap between cards." },
  { name: "--googlereviews-avatar-size", default: "38px", description: "Avatar size." },
  { name: "--googlereviews-avatar-font", default: "var(--font-header, inherit)", description: "Avatar/mark font." },
  { name: "--googlereviews-text-color", default: "#3e3e3e", description: "Review text color." },
  { name: "--googlereviews-link-color", default: "#4285f4", description: "Link color." }
];

const exampleCode = `<GoogleReviews
  placeId=\"YOUR_PLACE_ID\"
  apiKey=\"YOUR_API_KEY\"
  maxReviews={6}
  sort=\"newest\"
  locale=\"fr\"
  readMoreLabel=\"Lire la suite\"
  translate={false}
/>`;
---

<DocLayout title="GoogleReviews" description="Embed Google ratings and reviews with write-review CTA and JSON-LD." items={components}>
  <PropsTable props={props} />
  <PropsTable title="Style variables" props={styleVars} />

  <Preview title="Preview" code={exampleCode}>
    <p style="margin: 0 0 0.5rem; font-weight: 600;">Original language (translate=false, locale=fr)</p>
    <GoogleReviews
      placeId="ChIJeVsU9JlCCkgRwL0Auxd3lio"
      apiKey="AIzaSyCFIDO40Oe8F2KWDXVLxjnid--6521E43E"
      maxReviews={6}
      sort="newest"
      locale="fr"
      translate={false}
      style="--googlereviews-card-width: 280px;"
      strict={false}
    />

    <p style="margin: 1.5rem 0 0.5rem; font-weight: 600;">Translated to English (translate=true, locale=en)</p>
    <GoogleReviews
      placeId="ChIJeVsU9JlCCkgRwL0Auxd3lio"
      apiKey="AIzaSyCFIDO40Oe8F2KWDXVLxjnid--6521E43E"
      maxReviews={6}
      sort="newest"
      locale="en"
      translate={true}
      style="--googlereviews-card-width: 280px;"
      strict={false}
    />
  </Preview>
</DocLayout>
