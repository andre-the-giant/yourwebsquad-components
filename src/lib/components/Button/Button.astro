---
/*
Props:
- label?: string
- href?: string
- target?: string
- rel?: string
- variant?: "solid" | "outline" | "ghost"
- size?: "xs" | "sm" | "md" | "lg"
- type?: "button" | "submit" | "reset"
- disabled?: boolean
Notes:
- rel defaults to "noreferrer" when target is "_blank".
*/
const {
  label = "Button",
  href,
  target,
  rel,
  variant = "solid",
  size = "md",
  type = "button",
  disabled = false
} = Astro.props;

const resolvedLabel = label;
const resolvedHref = href;
const resolvedTarget = target;
const resolvedRel = rel ?? (resolvedTarget === "_blank" ? "noreferrer" : undefined);
const className = `button button--${variant} button--${size}`;
---

{
  resolvedHref ? (
    <a
      class={className}
      href={resolvedHref}
      target={resolvedTarget}
      rel={resolvedRel}
      aria-disabled={disabled ? "true" : undefined}
    >
      <slot>{resolvedLabel}</slot>
    </a>
  ) : (
    <button class={className} type={type} disabled={disabled}>
      <slot>{resolvedLabel}</slot>
    </button>
  )
}

<style>
  .button {
    display: inline-flex;
    align-items: center;
    place-content: center;
    gap: var(--space-2);
    padding: 0.65rem 1.5rem;
    border-radius: 0;
    border: 1px solid transparent;
    font-family: var(--font-body);
    font-weight: var(--weight-semibold);
    font-size: var(--size-md);
    line-height: var(--line-tight);
    text-decoration: none;
    cursor: pointer;
    transition:
      transform 120ms ease,
      box-shadow 120ms ease,
      background 120ms ease,
      color 120ms ease,
      border-color 120ms ease;
  }

  .button:focus-visible {
    outline: 2px solid var(--color-focus);
    outline-offset: 2px;
  }

  .button[aria-disabled="true"],
  .button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  .button--solid {
    background: var(--color-accent);
    color: var(--color-accent-contrast);
    border-color: var(--color-accent);
    box-shadow: 0 12px 25px color-mix(in srgb, var(--color-accent) 35%, transparent);
  }

  .button--solid:hover {
    transform: translateY(-1px);
  }

  .button--outline {
    background: transparent;
    color: var(--color-accent);
    border-color: var(--color-accent);
  }

  .button--outline:hover {
    background: var(--color-accent-muted);
  }

  .button--ghost {
    background: transparent;
    color: var(--color-fg);
    border-color: transparent;
    text-decoration: dotted underline;
  }

  .button--ghost:hover {
    background: var(--color-accent-muted);
    color: var(--color-accent);
    text-decoration: none;
  }

  .button--xs {
    padding: 0.2rem 0.5rem;
    font-size: var(--size-xs);
    font-weight: 400;
  }
  .button--sm {
    padding: 0.45rem 1rem;
    font-size: var(--size-sm);
    box-shadow: 0;
  }

  .button--md {
    padding: 0.65rem 1.5rem;
    font-size: var(--size-md);
  }

  .button--lg {
    padding: 0.85rem 1.9rem;
    font-size: var(--size-lg);
  }
</style>
